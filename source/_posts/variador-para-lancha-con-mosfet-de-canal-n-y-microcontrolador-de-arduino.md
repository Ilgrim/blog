---
title: "Variador para lancha con MOSFET de canal N y microcontrolador de Arduino"
date: 2014-05-14 19:12:18
tags: 
---
<p style="text-align: justify;">Hoy he empezado a hacer pruebas para ver si es viable hacer un variador de motor para una lancha radiocontrolada. Tenemos una lancha rápida (con su motor) desde hace muchos años y la queremos rehabilitar. La idea es aprovechar la emisora, el receptor y la batería de un avión para usarlos en la lancha. Hará falta el variador que estoy diseñando y un servo para el timón.</p>
<p style="text-align: justify;">El variador consiste en un microcontrolador para convertir las señales (que funciona a 5V) y en un transistor MOSFET de canal N como elemento conmutador, concretamente el IRLB8743. Éste operará al voltaje de la batería, aunque yo he hecho las pruebas con la salida de 12V de una fuente de XBox, que ofrece hasta 14 amperios.</p>
<p style="text-align: justify;">En las pruebas he usado un potenciómetro para controlar la velocidad del motor, aunque en la versión final el micro leerá la señal de tipo servo que proviene del receptor de radiofrecuencia. Según el valor deseado enviará la <a title="Luz ambiental para tu monitor en Linux" href="http://yombo.org/2012/12/luz-ambiental-para-tu-monitor-en-linux/">señal modulada por ancho de pulso</a> (PWM o Pulse Width Modulation) que llega al transistor MOSFET y regula la velocidad del motor.</p>
<p style="text-align: justify;"><a href="http://yombo.org/wp-content/uploads/2014/05/Esquema-variador.png"><img class="aligncenter size-large wp-image-975" alt="Esquema variador" src="http://yombo.org/wp-content/uploads/2014/05/Esquema-variador-1024x461.png" width="625" height="281" /></a>Las pruebas han ido bastante bien, la variación de velocidad funciona correctamente. El único problema es que el MOSFET se calienta mucho y rápidamente (no he puesto el motor a máxima potencia más de dos segundos, y a baja potencia menos de 10 segundos). Entre cada prueba he dejado que se enfriara. He leído en algún foro que los MOSFET se pueden poner en paralelo (cada uno con su resistencia de 10 KOhm de <em>pullup</em> a alimentación), con lo que podría poner los cuatro que tengo y se calentarían mucho menos, y obviamente les pondría disipador.</p>
<p style="text-align: justify;">Foto de las pruebas (está desconectado) con el circuito del microcontrolador en el <em>protoboard</em>, el MOSFET sujetado con pinzas de cocodrilo, el motor a la derecha y los cables y el conector de la fuente de alimentación de XBox a la izquierda. El cable USB arriba a la izquierda lo uso para monitorizar el micro y programarlo:</p>
<p style="text-align: justify;"><a href="http://yombo.org/wp-content/uploads/2014/05/variador_motor_1.jpg"><img class="aligncenter size-large wp-image-978" alt="variador_motor_1" src="http://yombo.org/wp-content/uploads/2014/05/variador_motor_1-1024x575.jpg" width="625" height="350" /></a>Y ya sólo queda hacer la parte de recepción de la señal, que haré cuando tengamos el avión y el receptor. Para ello simplemente basta con conectar el pin con la "señal de servo" (no he encontrado un término para este tipo de señal) a un pin del microcontrolador y usar la función pulseIn() de Arduino que nos dirá el ancho del pulso en microsegundos (lo que indica 0 grados para 0.3 ms y 180 grados para 2.1 ms, aproximadamente). Las señales de los servos suelen ser de 50 Hz, es decir 20 ms de separación entre el inicio de cada pulso.</p>
<p style="text-align: justify;">Además habrá que hacer el programa del microcontrolador tolerante a fallos, es decir si deja de recibir pulsos se ha de detener el motor... y poco más.</p>
<p style="text-align: justify;">También se pueden meter más canales del receptor al micro (si sobran canales, ya que se usa uno para el motor y otro directamente al servo del timón), que podrían servir para encender/apagar luces, algún actuador... no sé.</p>
<p style="text-align: justify;">Y queda por supuesto hacer el circuito final, que ha de ser lo más reducido posible porque no hay mucho espacio dentro de la lancha.</p>
<p style="text-align: justify;">Hasta la próxima!</p>
<p style="text-align: justify;">Edit: Al día siguiente he hecho algunas pruebas más, y poniendo un diodo entre los bornes del motor se ha solucionado el calentamiento del MOSFET. No se calienta nada! No hace falta ni disipador, ni tendré que poner varios en paralelo. Perfecto :)</p>
<p style="text-align: justify;"></p>